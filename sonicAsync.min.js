(function(g){function u(c,b,a){var d;c[b](function(e,f){d?n(e,f):(d=1,a[3]-=1,e)?a[5]||(a[5]=1,a[2](e,a[1])):(a[1][b]=f,a[0]+=1,a[0]<a[4]?(a[3]+=1,u(c,a[0],a)):a[3]||a[5]||(a[5]=1,a[2](e,a[1])))})}function l(){}function n(c,b){g.silent||console.error("callback called already; err=",c,"; data=",b);if(g.trace)console.trace("callback called already stack");else if(g.errout)throw Error("callback called already");}function t(){throw Error("limit not specified or too big");}g.fastWaterfall=function(c,b){function a(e,
f){d+=1;var k=c[d];e?b(e):k?k(f,a):b(e,f)}b=b||l;var d=0;c[0](null,a)};g.waterfall=function(c,b){b=b||l;var a=function(d){return function(e,f){var k=d;if(k){var h=c[k];e?b(e):h?(h(f,a(k+1)),d=null):b(e,f)}else n(e,f)}};c[0](null,a(1))};g.series=function(c,b){g.parallelLimit(c,1,b)};g.filterSeries=function(c,b,a){function d(h){var v;b(c[h],function(b,g){v?n(b,g):(v=1,b?a(b,f):(g&&(f[k]=c[h],k+=1),h+=1,h<e?d(h):a(b,f)))})}a=a||l;var e=c.length,f=[],k=0;d(0)};g.mapSeries=function(c,b,a){function d(k){var h;
b(c[k],function(b,c){h?n(b,c):(h=1,b?a(b,f):(f[k]=c,k+=1,k<e?d(k):a(b,f)))})}a=a||l;var e=c.length,f=[];d(0)};g.filter=function(c,b,a){g.filterParallel(c,b,a)};g.filterParallel=function(c,b,a){function d(d){var e;b(c[d],function(b,g){if(e)n(b,g);else if(e=1,b?k=0:(g&&(f[d]=c[d]),k-=1),!k&&!h)if(h=1,b)a(b,f);else{for(var l=[],s=f.length,q=0,p=0;p<s;p+=1)f[p]&&(l[q]=f[p],q+=1);a(b,l)}})}a=a||l;for(var e=c.length,f=Array(e),k=e,h=0;e;)e-=1,d(e)};g.filter=g.filterParallel;g.mapParallel=function(c,b,a){function d(d){var e;
b(c[d],function(b,c){e?n(b,c):(e=1,b)?h||(h=1,a(b,f)):(f[d]=c,k-=1,k||h||(h=1,a(b,f)))})}a=a||l;for(var e=c.length,f=Array(e),k=e,h=0;e;)e-=1,d(e)};g.map=g.mapParallel;g.filterLimit=function(c,b,a,d){function e(a){var l;b(c[a],function(b,s){if(l)n(b,s);else if(l=1,b)g||(g=1,d(b,k));else if(h-=1,s&&(k[a]=c[a]),m<f)g||(h+=1,e(m++));else if(!h&&!g){g=1;for(var q=[],p=0,r=0;r<f;r+=1)k[r]&&(q[p]=k[r],p+=1);d(b,q)}})}d=d||l;var f=c.length;(!a||a>f)&&t();for(var k=[],h=0,g=0,m=0;m<a;m+=1)h+=1,e(m)};g.mapLimit=
function(c,b,a,d){function e(a){var l;b(c[a],function(b,c){l?n(b,c):(l=1,b)?g||(g=1,d(b,k)):(h-=1,k[a]=c,m<f?g||(h+=1,e(m++)):h||g||(g=1,d(b,k)))})}d=d||l;var f=c.length;(!a||a>f)&&t();for(var k=[],h=0,g=0,m=0;m<a;m+=1)h+=1,e(m)};g.parallel=function(c,b){function a(a){return function(c,f){null===a?b!==l&&n(c,f):(c?d=0:(e[a]=f,a=null,d-=1),d||(b(c,e),b=l))}}b=b||l;for(var d=c.length,e=[],f=d;f;)f-=1,c[f](a(f))};g.all=function(c,b){function a(a){return function(c,f){null===a?b!==l&&n(c,f):(e[a]=c?c:
f,a=null,d-=1,d||(b(null,e),b=l))}}b=b||l;for(var d=c.length,e=[],f=d;f;)f-=1,c[f](a(f))};g.race=function(c,b){function a(a,c){a?b(a,null):b(null,c);b=l}b=b||l;for(var d=c.length;d;)d-=1,c[d](a)};g.parallelLimit=function(c,b,a){a=a||l;var d=c.length;(!b||b>d)&&t();a=[b-1,[],a,0,d,0];for(d=0;d<b;d+=1)a[3]+=1,u(c,d,a)};g.Noapply=function(c){var b=[].slice.call(arguments,1);return function(){var a=arguments.length,d;if(0<a){d=[].slice.call(arguments);for(var e=0;e<a;e++)b.push(d[e])}return c.apply(null,
b)}};g.trace=0;g.silent=0})(module&&exports?exports:this.sonicAsync=this.sonicAsync||{});
