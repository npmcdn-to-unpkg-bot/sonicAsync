(function(c){function l(){}function n(d,a){c.silent||console.error("callback called already; err=",d,"; data=",a);if(c.trace)console.trace("callback called already stack");else if(c.errout)throw Error("callback called already");}function q(){throw Error("limit not specified or too big");}c.fastWaterfall=function(d,a){function b(e,f){k+=1;var h=d[k];e?a(e):h?h(f,b):a(e,f)}a=a||l;var k=0;d[0](null,b)};c.waterfall=function(d,a){a=a||l;var b=function(k){return function(e,f){var h=k;if(h){var g=d[h];e?
a(e):g?(g(f,b(h+1)),k=null):a(e,f)}else n(e,f)}};d[0](null,b(1))};c.series=function(d,a){c.parallelLimit(d,1,a)};c.filterSeries=function(d,a,b){function k(g){var v;a(d[g],function(a,c){v?n(a,c):(v=1,a?b(a,f):(c&&(f[h]=d[g],h+=1),g+=1,g<e?k(g):b(a,f)))})}b=b||l;var e=d.length,f=[],h=0;k(0)};c.mapSeries=function(d,a,b){function k(h){var g;a(d[h],function(a,d){g?n(a,d):(g=1,a?b(a,f):(f[h]=d,h+=1,h<e?k(h):b(a,f)))})}b=b||l;var e=d.length,f=[];k(0)};c.filter=function(d,a,b){c.filterParallel(d,a,b)};c.filterParallel=
function(d,a,b){function k(e){var k;a(d[e],function(a,c){if(k)n(a,c);else if(k=1,a?h=0:(c&&(f[e]=d[e]),h-=1),!h&&!g)if(g=1,a)b(a,f);else{for(var l=[],u=f.length,r=0,p=0;p<u;p+=1)f[p]&&(l[r]=f[p],r+=1);b(a,l)}})}b=b||l;for(var e=d.length,f=Array(e),h=e,g=0;e;)e-=1,k(e)};c.filter=c.filterParallel;c.mapParallel=function(d,a,b){function k(e){var k;a(d[e],function(a,d){k?n(a,d):(k=1,a)?g||(g=1,b(a,f)):(f[e]=d,h-=1,h||g||(g=1,b(a,f)))})}b=b||l;for(var e=d.length,f=Array(e),h=e,g=0;e;)e-=1,k(e)};c.eachLimit=
function(d,a,b,k){c.mapLimit(d,a,b,k)};c.eachSeries=function(d,a,b){c.mapLimit(d,a,1,b)};c.each=function(d,a,b){c.map(d,a,b)};c.mapAll=function(d,a,b){function k(e){a(d[e],function(a,d){null===e?n(a,d):(f[e]=a?a:d,h-=1,e=null,h||(b(a,f),b=l))})}b=b||l;for(var e=d.length,f=Array(e),h=e;e;)e-=1,k(e)};c.map=c.mapParallel;c.mapAllParallel=c.mapAll;c.filterLimit=function(d,a,b,k){function e(b){var l;a(d[b],function(a,u){if(l)n(a,u);else if(l=1,a)c||(c=1,k(a,h));else if(g-=1,u&&(h[b]=d[b]),m<f)c||(g+=1,
e(m++));else if(!g&&!c){c=1;for(var r=[],p=0,t=0;t<f;t+=1)h[t]&&(r[p]=h[t],p+=1);k(a,r)}})}k=k||l;var f=d.length;(!b||b>f)&&q();for(var h=[],g=0,c=0,m=0;m<b;m+=1)g+=1,e(m)};c.mapLimit=function(d,a,b,k){function e(b){var l;a(d[b],function(a,d){l?n(a,d):(l=1,a)?c||(c=1,k(a,h)):(g-=1,h[b]=d,m<f?c||(g+=1,e(m++)):g||c||(c=1,k(a,h)))})}k=k||l;var f=d.length;(!b||b>f)&&q();for(var h=[],g=0,c=0,m=0;m<b;m+=1)g+=1,e(m)};c.parallel=function(d,a){function b(b){return function(d,c){null===b?a!==l&&n(d,c):(d?k=
0:(e[b]=c,b=null,k-=1),k||(a(d,e),a=l))}}a=a||l;for(var k=d.length,e=[],c=k;c;)c-=1,d[c](b(c))};c.all=function(d,a){function b(b){return function(d,f){null===b?a!==l&&n(d,f):(e[b]=d?d:f,b=null,c-=1,c||(a(null,e),a=l))}}a=a||l;for(var c=d.length,e=[],f=c;f;)f-=1,d[f](b(f))};c.race=function(d,a){function b(b,d){b?a(b,null):a(null,d);a=l}a=a||l;for(var c=d.length;c;)c-=1,d[c](b)};c.parallelLimit=function(d,a,b){function c(a){return function(g,q){var s=a;if(null===s)n(g,q);else if(g)b(g,e),b=l;else{e[s]=
q;f+=1;a=null;var s=f,w=d[s];w?w(c(s)):h?h-=1:(b(g,e),b=l)}}}(!a||a>d.length)&&q();b=b||l;for(var e=[],f=a-1,h=f,g=0;g<a;g+=1)d[g](c(g))};c.Noapply=function(d){var a=[].slice.call(arguments,1);return function(){var b=arguments.length,c;if(0<b){c=[].slice.call(arguments);for(var e=0;e<b;e++)a.push(c[e])}return d.apply(null,a)}};c.trace=0;c.silent=0})("object"===typeof module&&"object"===typeof exports?exports:this.sonicAsync=this.sonicAsync||{});
